// <auto-generated/>
#pragma warning disable 1591
#pragma warning disable 0414
#pragma warning disable 0649
#pragma warning disable 0169

namespace PrOnWeb.Shared
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "D:\KHOTDEE_WORK\TPAC_TPCC\PR Online\PrOnWeb\PrOnWeb_No_Git\PrOnWeb\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "D:\KHOTDEE_WORK\TPAC_TPCC\PR Online\PrOnWeb\PrOnWeb_No_Git\PrOnWeb\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "D:\KHOTDEE_WORK\TPAC_TPCC\PR Online\PrOnWeb\PrOnWeb_No_Git\PrOnWeb\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "D:\KHOTDEE_WORK\TPAC_TPCC\PR Online\PrOnWeb\PrOnWeb_No_Git\PrOnWeb\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "D:\KHOTDEE_WORK\TPAC_TPCC\PR Online\PrOnWeb\PrOnWeb_No_Git\PrOnWeb\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "D:\KHOTDEE_WORK\TPAC_TPCC\PR Online\PrOnWeb\PrOnWeb_No_Git\PrOnWeb\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "D:\KHOTDEE_WORK\TPAC_TPCC\PR Online\PrOnWeb\PrOnWeb_No_Git\PrOnWeb\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "D:\KHOTDEE_WORK\TPAC_TPCC\PR Online\PrOnWeb\PrOnWeb_No_Git\PrOnWeb\_Imports.razor"
using PrOnWeb;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "D:\KHOTDEE_WORK\TPAC_TPCC\PR Online\PrOnWeb\PrOnWeb_No_Git\PrOnWeb\_Imports.razor"
using PrOnWeb.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "D:\KHOTDEE_WORK\TPAC_TPCC\PR Online\PrOnWeb\PrOnWeb_No_Git\PrOnWeb\_Imports.razor"
using PrOnWeb.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "D:\KHOTDEE_WORK\TPAC_TPCC\PR Online\PrOnWeb\PrOnWeb_No_Git\PrOnWeb\_Imports.razor"
using Syncfusion.Blazor;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "D:\KHOTDEE_WORK\TPAC_TPCC\PR Online\PrOnWeb\PrOnWeb_No_Git\PrOnWeb\_Imports.razor"
using Syncfusion.Blazor.Calendars;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "D:\KHOTDEE_WORK\TPAC_TPCC\PR Online\PrOnWeb\PrOnWeb_No_Git\PrOnWeb\_Imports.razor"
using Syncfusion.Blazor.Grids;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "D:\KHOTDEE_WORK\TPAC_TPCC\PR Online\PrOnWeb\PrOnWeb_No_Git\PrOnWeb\Shared\MainLayout.razor"
using System.Security.Claims;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "D:\KHOTDEE_WORK\TPAC_TPCC\PR Online\PrOnWeb\PrOnWeb_No_Git\PrOnWeb\Shared\MainLayout.razor"
using Syncfusion.Blazor.Navigations;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "D:\KHOTDEE_WORK\TPAC_TPCC\PR Online\PrOnWeb\PrOnWeb_No_Git\PrOnWeb\Shared\MainLayout.razor"
using Microsoft.AspNetCore.Identity;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "D:\KHOTDEE_WORK\TPAC_TPCC\PR Online\PrOnWeb\PrOnWeb_No_Git\PrOnWeb\Shared\MainLayout.razor"
using Microsoft.Extensions.Configuration;

#line default
#line hidden
#nullable disable
    public partial class MainLayout : LayoutComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
        }
        #pragma warning restore 1998
#nullable restore
#line 65 "D:\KHOTDEE_WORK\TPAC_TPCC\PR Online\PrOnWeb\PrOnWeb_No_Git\PrOnWeb\Shared\MainLayout.razor"
       
    [CascadingParameter]
    private Task<AuthenticationState> _authState { get; set; }
    private AuthenticationState authState;
    SfTreeView<TreeData> TreeView;
    ClaimsPrincipal MyClaims = new ClaimsPrincipal();
    string FullName;
    SfSidebar Sidebar;
    public ExpandAction Expand = ExpandAction.Click;
    private bool sidebarToggle;
    public bool SidebarToggle
    {
        get => sidebarToggle;
        set
        {
            sidebarToggle = value;
            InvokeAsync(() => StateHasChanged());
        }
    }
    Dictionary<string, object> HtmlAttribute = new Dictionary<string, object>()
{
        {"class", "sidebar-treeview" }
    };

    public void nodeSelect(NodeSelectEventArgs args)
    {
        var id = args.NodeData.Id;
        var url = treedata.Where(y => y.nodeId == id).First().URL;
        if (url != null)
        {
            navi.NavigateTo(url);
            //SidebarToggle = false;
        }
    }
    public void nodeClick()
    {
        if (TreeView != null && TreeView.SelectedNodes != null) TreeView.SelectedNodes[0] = "00"; // force reset การเลือก node แก้ปัญหา node ค้าง

    }
    public void Toggle()
    {
        SidebarToggle = !SidebarToggle;
    }
    public class TreeData
    {
        public string nodeId { get; set; }
        public string nodeText { get; set; }
        public string iconCss { get; set; }
        public bool hasChild { get; set; }
        public string pid { get; set; }
        public string URL { get; set; }
    }
    private List<TreeData> treedata = new List<TreeData>();
    protected override async Task OnInitializedAsync()
    {
        base.OnInitialized();
        authState = await _authState;
        MyClaims = (await _authState).User;
        var thisUser = _UserManager.Users.FirstOrDefault(x => x.UserName == MyClaims.Identity.Name);
        FullName = "";
        if (thisUser != null)
        {
            FullName = thisUser.FullName;
        }
        else
        {
            navi.NavigateTo("Identity/Account/Login");
        }

        treedata.Add(new TreeData { nodeId = "01", nodeText = "Home", iconCss = "oi oi-home", URL = "" });
        treedata.Add(new TreeData { nodeId = "02", nodeText = "Purchase Requests", iconCss = "oi oi-spreadsheet", hasChild = true });
        treedata.Add(new TreeData { nodeId = "02-01", nodeText = "Purchase Requests List", iconCss = "oi oi-chevron-right", pid = "02", URL = "prlist" });


        if (MyClaims.IsInRole("Requester"))
        {
            treedata.Add(new TreeData { nodeId = "02-02", nodeText = "Create Purchase Requests", iconCss = "oi oi-chevron-right", pid = "02", URL = "prcreate" });
        }
        treedata.Add(new TreeData { nodeId = "02-03", nodeText = "Purchase Requests Report", iconCss = "oi oi-chevron-right", pid = "02", URL = "prReportUser" });

        treedata.Add(new TreeData { nodeId = "03", nodeText = "Returning Notes", iconCss = "icon-docs icon", URL = "rnlist" });

        if (MyClaims.IsInRole("Administrators"))
        {
            treedata.Add(new TreeData { nodeId = "04", nodeText = "Administration", iconCss = "oi oi-briefcase", hasChild = true });
            treedata.Add(new TreeData { nodeId = "04-01", nodeText = "User-Role", iconCss = "oi oi-chevron-right", pid = "04", URL = "UserRole" });
            treedata.Add(new TreeData { nodeId = "04-02", nodeText = "Roles", iconCss = "oi oi-chevron-right", pid = "04", URL = "roles" });
            treedata.Add(new TreeData { nodeId = "04-03", nodeText = "Users", iconCss = "oi oi-chevron-right", pid = "04", URL = "users" });
            treedata.Add(new TreeData { nodeId = "04-04", nodeText = "Configurations", iconCss = "oi oi-chevron-right", pid = "04", URL = "configuration" });
            treedata.Add(new TreeData { nodeId = "04-05", nodeText = "Import Log", iconCss = "oi oi-chevron-right", pid = "04", URL = "importlog" });
            treedata.Add(new TreeData { nodeId = "04-06", nodeText = "File Browser", iconCss = "oi oi-chevron-right", pid = "04", URL = "filebrowser" });
            treedata.Add(new TreeData { nodeId = "04-07", nodeText = "Mail Sender", iconCss = "oi oi-chevron-right", pid = "04", URL = "mailutil" });
            treedata.Add(new TreeData { nodeId = "04-08", nodeText = "All Pr List", iconCss = "oi oi-chevron-right", pid = "04", URL = "allprlist" });
        }
        if (MyClaims.IsInRole("PF") || MyClaims.IsInRole("PH"))
        {
            treedata.Add(new TreeData { nodeId = "04", nodeText = "Administration", iconCss = "oi oi-briefcase", hasChild = true });
            treedata.Add(new TreeData { nodeId = "04-01", nodeText = "All Pr List", iconCss = "oi oi-chevron-right", pid = "04", URL = "allprlist" });
            treedata.Add(new TreeData { nodeId = "05", nodeText = "Reports", iconCss = "oi oi-print", hasChild = true });
            treedata.Add(new TreeData { nodeId = "05-01", nodeText = "PR Report", iconCss = "oi oi-chevron-right", pid = "05", URL = "prreport" });
            treedata.Add(new TreeData { nodeId = "05-02", nodeText = "RN Report", iconCss = "oi oi-chevron-right", pid = "05", URL = "rnreport" });
        }
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IConfiguration Configuration { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager navi { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private UserManager<ApplicationUser> _UserManager { get; set; }
    }
}
#pragma warning restore 1591
